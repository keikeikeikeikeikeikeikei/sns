import{d as k,r as l,c as o,a as t,f as V,e as b,g as m,v as p,F as N,j as S,h as y,b as _,w as C,m as U,o as n,t as h,i as q}from"./index-CzD91pAN.js";import{a as B}from"./axios-instance-9reuLYs6.js";const j={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4"},D={class:"w-full max-w-md"},F={class:"card p-8"},I={key:0,class:"p-3 bg-red-50 text-red-600 text-sm rounded-lg"},M={class:"list-disc list-inside"},R=["disabled"],T={key:0,class:"pi pi-spin pi-spinner mr-2"},E={class:"text-center text-sm text-gray-500 mt-6"},G=k({__name:"RegisterView",setup(L){const g=q(),i=l(""),v=l(""),f=l(""),x=l(""),a=l([]),u=l(!1),w=async()=>{var c,e,d,s;a.value=[],u.value=!0;try{const r=await B.post("/auth/register",{username:i.value,email:v.value,password:f.value,display_name:x.value||i.value});localStorage.setItem("token",r.data.token),g.push("/")}catch(r){(e=(c=r.response)==null?void 0:c.data)!=null&&e.errors?a.value=r.response.data.errors:a.value=[((s=(d=r.response)==null?void 0:d.data)==null?void 0:s.error)||"登録に失敗しました"]}finally{u.value=!1}};return(c,e)=>{const d=U("router-link");return n(),o("div",j,[t("div",D,[t("div",F,[e[11]||(e[11]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-3xl font-bold bg-gradient-to-r from-primary-500 to-primary-700 bg-clip-text text-transparent"}," SNS "),t("p",{class:"text-gray-500 mt-2"},"新規アカウント登録")],-1)),t("form",{onSubmit:V(w,["prevent"]),class:"space-y-4"},[t("div",null,[e[4]||(e[4]=t("label",{class:"form-label"},"ユーザー名",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),type:"text",class:"form-input",placeholder:"username",maxlength:"50",required:""},null,512),[[p,i.value]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"form-label"},"表示名",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),type:"text",class:"form-input",placeholder:"表示名（省略可）",maxlength:"255"},null,512),[[p,x.value]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"form-label"},"メールアドレス",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),type:"email",class:"form-input",placeholder:"email@example.com",required:""},null,512),[[p,v.value]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"form-label"},"パスワード",-1)),m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>f.value=s),type:"password",class:"form-input",placeholder:"8文字以上",minlength:"8",required:""},null,512),[[p,f.value]])]),a.value.length?(n(),o("div",I,[t("ul",M,[(n(!0),o(N,null,S(a.value,s=>(n(),o("li",{key:s},h(s),1))),128))])])):b("",!0),t("button",{type:"submit",class:"btn btn-primary w-full py-3",disabled:u.value},[u.value?(n(),o("i",T)):b("",!0),e[8]||(e[8]=y(" 登録 ",-1))],8,R)],32),t("p",E,[e[10]||(e[10]=y(" 既にアカウントをお持ちの方は ",-1)),_(d,{to:"/login",class:"text-primary-600 hover:underline font-medium"},{default:C(()=>[...e[9]||(e[9]=[y(" ログイン ",-1)])]),_:1})])])])])}}});export{G as default};
