import{d as g,r as i,c as u,a as t,u as d,e as b,h as y,t as _,g as v,v as f,o as m,i as w}from"./index-CzD91pAN.js";import{u as k}from"./useMutation-BivMFSN2.js";import{a as h}from"./axios-instance-9reuLYs6.js";import"./useQueryClient-DaGhUnUp.js";const V={class:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100"},C={class:"sticky top-0 z-50 bg-white/80 backdrop-blur-lg border-b border-gray-200"},N={class:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between"},B={class:"flex items-center gap-4"},q=["disabled"],z={key:0,class:"pi pi-spin pi-spinner mr-2"},D={class:"max-w-4xl mx-auto px-4 py-6"},E={class:"card"},M={key:0,class:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg"},P={class:"space-y-4"},F=g({__name:"NewQuestionView",setup(S){const p=w(),o=i(""),a=i(""),r=i(""),l=k({mutationFn:async()=>(await h.post("/qa",{title:o.value,content:a.value})).data,onSuccess:n=>{p.push(`/qa/${n.id}`)},onError:n=>{var e,s,c;r.value=((c=(s=(e=n.response)==null?void 0:e.data)==null?void 0:s.errors)==null?void 0:c[0])||"投稿に失敗しました"}}),x=()=>{r.value="",o.value.trim()&&a.value.trim()&&l.mutate()};return(n,e)=>(m(),u("div",V,[t("header",C,[t("div",N,[t("div",B,[t("button",{onClick:e[0]||(e[0]=s=>d(p).back()),class:"btn btn-ghost p-2"},[...e[3]||(e[3]=[t("i",{class:"pi pi-arrow-left"},null,-1)])]),e[4]||(e[4]=t("h1",{class:"text-lg font-semibold"},"質問を投稿",-1))]),t("button",{onClick:x,class:"btn btn-primary",disabled:!o.value.trim()||!a.value.trim()||d(l).isPending.value},[d(l).isPending.value?(m(),u("i",z)):b("",!0),e[5]||(e[5]=y(" 投稿する ",-1))],8,q)])]),t("main",D,[t("div",E,[r.value?(m(),u("div",M,_(r.value),1)):b("",!0),t("div",P,[t("div",null,[e[6]||(e[6]=t("label",{class:"form-label"},"タイトル",-1)),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),type:"text",class:"form-input",placeholder:"質問のタイトルを入力",maxlength:"255"},null,512),[[f,o.value]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"form-label"},"詳細",-1)),v(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value=s),class:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none min-h-[200px]",placeholder:"質問の詳細を入力してください..."},null,512),[[f,a.value]])])])])])]))}});export{F as default};
